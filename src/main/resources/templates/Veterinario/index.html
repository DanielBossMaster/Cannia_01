
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <title>Dashboard Veterinario</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="/css/VeterinarioCss/estilos.css">
</head>
<body>

<!-- HEADER -->
<header>
    <div class="logo">
        <img src="/img/logo.png" alt="logo">
    </div>
    <nav class="links">
        <a href="('cerrar-sesion')">Cerrar sesión</a>
    </nav>

</header>

<main class="container py-4">

    <!-- Barra de búsqueda -->
    <div class="mb-4">
        <input type="text" id="searchBar" class="form-control" placeholder="Buscar propietario...">
    </div>
    <!-- Botón agregar propietario -->

    <button type="button" class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#addPropietarioModal">
        <img src= "/img/nuevoo.png" alt="nuevo propietario" width="40" height="40">
        <span>Nuevo Propietario</span>
    </button>

     <button type="button" class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#addMascotaModal">
        <img src= "/img/mascotaaa.png" alt="nueva mascota" width="40" height="40">
        <span>Nueva Mascota</span>
    </button>

    <button class="btn btn-primary mb-3" data-bs-toggle="modal" >
        <img src= "/img/tienda.png" alt="Veterinaria" width="40" height="40">
        <span>Veterinaria</span>
    </button>

    <button class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#addOwnerModal">
        <img src= "/img/documento.png" alt="Historia clinica" width="40" height="40">
        <span>Historia Clinica</span>
    </button>
    <button class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#addOwnerModal">
        <img src= "/img/citaapng.png" alt="Citas" width="40" height="40">
        <span>Programar Cita</span>
    </button>

    <!-- Tarjetas de propietarios -->
    <div class="cards">
        <div class="card-owner" th:each="prop : ${propietarios}">
            <a href="">
                <span class="settings"><img src= "/img/ajustes.png" alt="Editar" width="20" height="20"></span>
            </a>

            <h5 th:text="${prop.nombrePro} + ' ' + ${prop.apellidoPro}">Propitario:</h5>
            <div th:if="${prop.mascotas != null}" th:each="masc : ${prop.mascotas} ">
                <p th:text="${masc.nomMascota}">Mascota:</p>
                <p th:text="${masc.color}"></p>
                <p th:text="${masc.raza}"></p>

                <form method="post" th:action="@{/veterinario/borrar/{id}(id=${masc.id})}">
                    <button type="submit" onclick="return confirm('¿Desea Eliminar?')" class="delete"><img src= "/img/eliminar.png" alt="Eliminar" height="20"></button>
                </form>
            </div>
            
        </div>
    </div>
</main>

<!-- Modal para agregar propietario -->
<div class="modal fade" id="addPropietarioModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">


        <form  th:action=@{/veterinario/nuevo} method="post" th:object="${propietario}"  class="modal-content">
          
             <div class="modal-header">

                <h5 class="modal-title">Registrar Propietario</h5>

                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>

              </div>

            <div class="modal-body">
                <div class="mb-3">
                    <label class="form-label">Numero de Documento</label>
                    <input type="text" th:field="*{numDoc}" class="form-control" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Nombre</label>
                    <input type="text" th:field="*{nombrePro}" class="form-control" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Apellido</label>
                    <input type="text" th:field="*{apellidoPro}" class="form-control" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Direccion</label>
                    <input type="text" th:field="*{direccionPro}" class="form-control" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Telefono</label>
                    <input type="text" th:field="*{telefonoPro}" class="form-control" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Correo</label>
                    <input type="email" th:field="*{correoPro}"  class="form-control" required>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="submit" class="btn btn-primary">Guardar</button>
            </div>
        </form>


    </div>
</div>
<!-- Modal para agregar Mascota -->   
<div class="modal fade" id="addMascotaModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <form th:action=@{/veterinario/nuevom} method="post" th:object="${mascota}" class="modal-content">
          
             <div class="modal-header">
                <h5 class="modal-title">Registrar Mascota</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
              </div>

            <div class="modal-body">
                <div class="mb-3">
                    <select name="propietarioId" class="form-label">
                     <option th:each = "prop : ${propietarios}"
                     th:value="${prop.id}"
                     th:text=" ${prop.nombrePro + ' ' + prop.apellidoPro}">
                     </option>
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label">Nombre</label>
                    <input type="text" th:field ="*{nomMascota}" class="form-control" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Especie</label>
                    <input type="text"  th:field ="*{especie}" class="form-control" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Raza</label>
                    <input type="text" th:field ="*{raza}"  class="form-control" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Color</label>
                    <input type="text"  th:field ="*{color}"  class="form-control" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Fecha de nacimiento</label>
                    <input type="date"  th:field ="*{fechaNacimiento}" class="form-control" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Fecha de nacimiento</label>
                    <select th:field ="*{genero}" class="form-control" required>
                        <option th:value="Macho">Macho</option>
                        <option th:value="Hembre">Hembra</option>
                    </select>
                </div>

                
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="submit" class="btn btn-primary">Guardar</button>
            </div>
        </form>
    </div>
</div>


<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<footer>
    <p>&copy; 2025 App Cannia. Todos los derechos reservados.</p>
</footer>
</body>
</html>
